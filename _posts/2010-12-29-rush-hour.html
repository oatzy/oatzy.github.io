---
layout: post
title: Rush Hour
date: '2010-12-29T16:35:00.000-08:00'
author: Oatzy
tags:
- rush hour
- trains
- fourier
- problem solving
- public transport
- maths
- modelling
modified_time: '2010-12-29T16:35:40.397-08:00'
thumbnail: http://3.bp.blogspot.com/_p_IGrzjF6JY/TRvNuy70JNI/AAAAAAAAAbI/8_7gbh8Sc-k/s72-c/graphs.jpg
blogger_id: tag:blogger.com,1999:blog-14769935.post-966723332088281967
blogger_orig_url: https://oatzy.blogspot.com/2010/12/rush-hour.html
---

So this ultimately turned out to be more an exercise in practicing fitting functions to data. But nonetheless, here it is.<br /><br />I was browsing the Department of Transport <a href="http://www.dft.gov.uk/pgr/statistics/">website</a> (as you do) looking for data for the whole trains thing. I didn't find what I was looking for, but I did find this<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/_p_IGrzjF6JY/TRvNuy70JNI/AAAAAAAAAbI/8_7gbh8Sc-k/s1600/graphs.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="288" src="http://3.bp.blogspot.com/_p_IGrzjF6JY/TRvNuy70JNI/AAAAAAAAAbI/8_7gbh8Sc-k/s320/graphs.jpg" width="320" /></a></div>This is, "Passenger numbers: by time of departure from station", and "represents rail travel in Great Britain as a whole, on an average weekday outside of school holidays". The bottom one is a breakdown by purpose of being on the train; the top on is total numbers.<br /><br />So the first thing you notice is there are curves for commuters going to and coming back from work - rush-hours. Now I'd thought that there would be a minor peak around midday, but apparently not.<br /><br />So if you wanted to get an approximate model of this graph, the first place you'd probably start would be notice that the commuters' curves are fairly '<a href="http://oatzy.blogspot.com/2010/12/normal-icicles.html">normal</a>' (in the mathematical sense.<br /><br />So working on them separately, and using <a href="http://www.wolfram.com/">Mathematica</a>'s <a href="http://reference.wolfram.com/mathematica/ref/FindFit.html">FindFit</a> function you get your curves. You then combine them and adjust them upwards to include business/leisure and you get this<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_p_IGrzjF6JY/TRvOFs0upHI/AAAAAAAAAbM/CcoMw0POcKc/s1600/norm-fit.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="148" src="http://1.bp.blogspot.com/_p_IGrzjF6JY/TRvOFs0upHI/AAAAAAAAAbM/CcoMw0POcKc/s320/norm-fit.jpg" width="320" /></a></div>Which is acceptable - it fits the first half better than the second. But not amazing overall. The equation is this, for those interested<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/_p_IGrzjF6JY/TRvOM2kCi9I/AAAAAAAAAbQ/6t0XweKBTCU/s1600/Norm-eqn.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/_p_IGrzjF6JY/TRvOM2kCi9I/AAAAAAAAAbQ/6t0XweKBTCU/s1600/Norm-eqn.png" /></a></div>So just for the hell of it, I tried getting a better fit using a <a href="http://en.wikipedia.org/wiki/Fourier_series">Fourier series</a>. This time using the totals, and again, this was using Mathematica. But for a Fourier series you're combining Sines and Cosines.<br /><br />The accuracy of the fit depends on how many terms you include. I tried various iterations until I found the most acceptable fit with the fewest terms, and that looks like this<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_p_IGrzjF6JY/TRvOV3Y0u3I/AAAAAAAAAbU/3Hi616BFnMA/s1600/Trig-overlay.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="158" src="http://1.bp.blogspot.com/_p_IGrzjF6JY/TRvOV3Y0u3I/AAAAAAAAAbU/3Hi616BFnMA/s320/Trig-overlay.png" width="320" /></a></div>Which in all fairness is a pretty good fit. Except for that it's got 15 terms and looks like this<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/_p_IGrzjF6JY/TRvTYohhw0I/AAAAAAAAAbc/9eae4uG-qAI/s1600/trigplot-eqn-crop.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/_p_IGrzjF6JY/TRvTYohhw0I/AAAAAAAAAbc/9eae4uG-qAI/s1600/trigplot-eqn-crop.png" /></a></div>Not what you would call elegant.<br /><br />So that's that. I doubt anyone's actually interested, but for all the effort I put in to it, I thought it worth 'formally' writing it up. Otherwise it'd be lost forever somewhere on my laptop and in one of my various notebooks.<br /><br />The other thing is, it could come in handy with the <a href="http://oatzy.blogspot.com/2010/08/train-problem.html">train problem</a>. But that's a whole other story.<br /><br />Anyway, I'm starting to ramble, so lets just leave it at that.<br /><br /><br />Oatzy.