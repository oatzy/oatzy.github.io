---
layout: post
title: 'Follow Up: Will I Get a Table?'
date: '2011-01-16T17:03:00.000-08:00'
author: Oatzy
tags:
- statistics
- coffee
- programming
- python
- everyday maths
- maths
- modelling
modified_time: '2011-01-16T17:55:44.399-08:00'
thumbnail: http://2.bp.blogspot.com/_p_IGrzjF6JY/TTOMklk6EQI/AAAAAAAAAc4/4yvphahWzXI/s72-c/output.png
blogger_id: tag:blogger.com,1999:blog-14769935.post-5125602504653656323
blogger_orig_url: https://oatzy.blogspot.com/2011/01/follow-up-will-i-get-table.html
---

So the model I talked about <a href="http://oatzy.blogspot.com/2011/01/model-cafe.html">last time</a> is all well and good, but you might find yourself thinking, "well what good does it do me?"<br /><br />It's a fair question. So here's how it works.<br /><br />First of all, I made some updates to the original model; for example, people can now stay for varying amounts of time.<br /><br />So what you <i>could</i> do is run the model as it is and look at what's happening at the time you're going to arrive. That has the benefit of it giving you some idea before you actually arrive at the caf√©. But the drawback that it's a bit of a stab in the dark.<br /><br />Instead, it's been reworked so you tell it things like how many tables there are, how many are taken, how many people are in front of you in the queue, etc.<br /><br />Anything you can't directly count, the code basically guesses.<br /><br /><br /><b>Guessing?</b><br /><br />It's a sort of <a href="http://en.wikipedia.org/wiki/Monte_carlo_simulation">educated guessing</a>. You can measure 'global' things, like how long people typically stay, and you'll get some sort of distribution of times. So what the code basically does is make guesses based on that observation.<br /><br />If you run the model once, you get one possible outcome - what <i>might</i> happen.<br /><br />But if instead you run the model, say, 1,000 times, you can work out what percent of those possible outcomes have at least one table unoccupied. And from that you get a decent estimation of your odds of getting a table without having to stand up, waiting, first.<br /><br />Obviously, it you run it for more cycles (say 10,000) then the output will be more 'accurate'. But at 1,000 cycles you get a variation in results of about 5%, which is acceptable, and it's less processor intensive.<br /><br />The other thing I had it do was take an average to get an idea of, approximately how many tables will be free (before you sit down) and how long you'll be queuing.<br /><br />Just to give you an idea, the output looks like this<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_p_IGrzjF6JY/TTOMklk6EQI/AAAAAAAAAc4/4yvphahWzXI/s1600/output.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/_p_IGrzjF6JY/TTOMklk6EQI/AAAAAAAAAc4/4yvphahWzXI/s1600/output.png" /></a></div>This adapted model ignores the effect of people joining the queue behind you, on the assumption that it has no, or negligible, effect.<br /><br />It also assumes that the staff don't (significantly) vary in how many people they can serve in a given period of time.<br /><br /><br /><b>Opportunism</b><br /><br />I mentioned last time the fact that groups of people will usually have one person standing in line while the others find a table. First of all, I managed to implement it in the model.<br /><br />But second, and more interesting, if we assume everyone is about equally opportunistic, then your odds of getting a table are about the same as if everyone waited until they'd been served before looking for a table.<br /><br />Obviously, if you were the only one being opportunistic then you're odds would go up (at least a little), and conversely, if you were the only one not being opportunistic, then that would put you at a disadvantage.<br /><br />For the shear hell of it, here's a <a href="http://en.wikipedia.org/wiki/Payoff_matrix">pay-off grid</a> for the different strategies,<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/_p_IGrzjF6JY/TTOM69o_MwI/AAAAAAAAAc8/t8J3eqoWMrQ/s1600/payoffs.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="197" src="http://3.bp.blogspot.com/_p_IGrzjF6JY/TTOM69o_MwI/AAAAAAAAAc8/t8J3eqoWMrQ/s200/payoffs.jpg" width="200" /></a></div>Of course, if you're on your own and the majority are with people and being opportunistic, then you're going to be at a disadvantage and there's very little you can do to help it.<br /><br />Although this is only really a problem if tables are limited. <br /><br /><br /><b>Usefulness</b><br /><br />Well first of all, the accuracy of the results is going to be dependent on the global variables, like rate of service, typical stay time, etc.<br /><br />Secondly, the output is mostly intellectual; that is, the output is unlikely to affect your behaviour<i>*</i>, and nor will it explicitly help you get a table. But it's interesting to look at.<br /><br />And as said above, in terms of ensuring you'll get a table, the strategy for when tables are limited is to grab a table as soon as you see one free up; and hopefully before anyone else can get to it.<br /><br />But all that aside, the code is <a href="http://dl.dropbox.com/u/4635169/cafe-predict.py">here</a> for if you want to have a play.<br /><br /><br />Oatzy.<br /><br /><br />* if you're at the back of 12 people and the model gives you a 5% of getting a table, you might be tempted to go somewhere else, or come back later.